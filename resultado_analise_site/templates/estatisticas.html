{% extends "cabecalho.html" %}

{% block title %}
    TCC MBA USP/ESALQ - Análise de site
{% endblock %}

{% block content %}

    <script
    src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
    </script>

    <h3>Estatísticas dos resultados</h3>
    <br>
    Número total de violações: {{ numero_total_violacoes }}
    <br>
    <br>

    <div class="left1" style="padding: 5px;">
        <h4>Tipo de deficiência com maior número de violações:</h4>
        <br>
        <table>
            <tr class="first_tr">
                <th align="left"><b>Violação ({{ numero_deficiencia_por_violacao|length }})</b></th>
                <th align="right"><b>Ocorrências</b></th>
                <th align="right"><b>Ocorrências (%)</b></th>
            </tr>
            {% for k, dpv in numero_deficiencia_por_violacao.items %}
                <tr>
                    <th align="left">{{ k }}</th>
                    <th align="right">{{ dpv.0 }}</th>
                    <th align="right">{{ dpv.1 }}</th>
                </tr>
            {% endfor %}
        </table>

        <br><br><br>------------------------------<br><br><br>

        <h4>Número de ocorrências de cada violação</h4><br>
        <table>
            <tr class="first_tr">
                <th align="left"><b>Violação ({{ numero_ocorrencias_violacao|length }})</b></th>
                <th align="right"><b>Ocorrências</b></th>
                <th align="right"><b>Ocorrências (%)</b></th>
                <th align="right"><b>Categorias de sítios afetados</b></th>
            </tr>
            {% for k, v in numero_ocorrencias_violacao.items %}
                <tr>
                    <th align="left">
                        <a href="https://dequeuniversity.com/rules/axe/4.10/{{ k }}"/>
                            {{ k }}
                        </a>
                    </th>
                    <th align="right">{{ v.0 }}</th>
                    <th align="right">{{ v.1 }}</th>
                    <th align="left">
                        {% for cat in v.2 %}
                            {{ cat }}<br>
                        {% endfor %}
                    </th>
                </tr>
            {% endfor %}
        </table>
    </div>

    <div class="center1" style="padding: 5px;">
        <h4>Graus de prioridade</h4>
        <table>
            <tr class="first_tr">
                <th align="left"><b>Grau de prioridade</b></th>
                <th align="right"><b>Ocorrências</b></th>
                <th align="right"><b>Ocorrências (%)</b></th>
            </tr>
            {% for k, nvp in numero_violacoes_por_prioridade.items %}
                <tr>
                    <th align="left">{{ k }}</th>
                    <th align="right">{{ nvp.0 }}</th>
                    <th align="right">{{ nvp.1 }}</th>
                </tr>
            {% endfor %}
        </table>

        <br><br><br>------------------------------<br><br><br>

        <h4>Violações por categoria de site</h4>
        <table>
            <tr class="first_tr">
                <th align="left"><b>Categoria (Qtd. analisados)</b></th>
                <th align="right"><b>Ocorrências</b></th>
                <th align="right"><b>Ocorrências (%)</b></th>
            </tr>
            {% for k, nvcs in numero_violacoes_por_categoria_de_site.items %}
                <tr>
                    <th align="left">{{ k }} ({{ nvcs.2 }})</th>
                    <th align="right">{{ nvcs.0 }}</th>
                    <th align="right">{{ nvcs.1 }}</th>
                </tr>
            {% endfor %}
        </table>
    </div>

    <div class="right1" style="padding: 5px;">
        <h4>Violação por categoria de sítio</h4>
        <table>
            <tr class="first_tr">
                <th align="left"><b>Categoria</b></th>
                <th align="left"><b>Ocorrências</b></th>
            </tr>
            {% for categoria, lista_violacoes in violacao_por_categoria_de_site.items %}
                <tr>
                    <th align="left">
                        {{ categoria }}
                    </th>
                    <th align="left">
                        <table style="height: 100%; width: 100%;">
                            {% for lista_interna in lista_violacoes %}
                                <tr style="height: 100%;">
                                    {% for v in lista_interna %}
                                        <th>
                                            <div style="text-align: center; vertical-align: text-top;">
                                                <a href="https://dequeuniversity.com/rules/axe/4.10/{{ v.0 }}"/>
                                                    {{ v.0 }}
                                                </a>
                                            </div>
                                            <br>
                                            <div style="text-align: center; vertical-align: text-bottom;"><b>({{ v.1 }})</b></div>
                                        </th>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </table>
                    </th>
                </tr>
            {% endfor %}
        </table>
    </div>

{% endblock %}